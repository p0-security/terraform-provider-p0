---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "p0_gcp_organization_iam_assessment Resource - p0"
subcategory: ""
description: |-
  An installation of P0, on an entire Google Cloud organization, for IAM assessment.
  To use this resource, you must also:
  create a custom role allowing IAM-assessment operations, andgrant this custom role to P0's service account.
  Use the read-only attributes defined on p0_gcp to create the requisite Google Cloud infrastructure.
  P0 recommends defining this infrastructure according to the example usage pattern.
---

# p0_gcp_organization_iam_assessment (Resource)

An installation of P0, on an entire Google Cloud organization, for IAM assessment.

To use this resource, you must also:
- create a custom role allowing IAM-assessment operations, and
- grant this custom role to P0's service account.

Use the read-only attributes defined on `p0_gcp` to create the requisite Google Cloud infrastructure.

P0 recommends defining this infrastructure according to the example usage pattern.

## Example Usage

```terraform
resource "p0_gcp" "example" {
  organization_id = "my_gcp_organization_id"
}

# This role grants P0 access to analyze your organization's IAM configuration and asset inventory
resource "google_organization_iam_custom_role" "example" {
  org_id      = p0_gcp.organization_id
  role_id     = "p0IamAssessor"
  title       = "P0 IAM assessor"
  description = "Integration role for org-wide P0 IAM assessment integration"
  permissions = concat(
    p0_gcp.example.iam_assessment.permissions.project,
    p0_gcp.example.iam_assessment.permissions.organization
  )
}

resource "google_organization_iam_member" "example" {
  org_id = p0_gcp.example.organization_id
  role   = google_organization_iam_custom_role.example.id
  member = "serviceAccount:${p0_gcp.gcp.service_account_email}"
}

# The `p0_gcp_organization_iam_assessment` resource will fail to validate unless it is installed
# _after_ the P0 service account is granted the above role
resource "p0_gcp_organization_iam_assessment" "example" {
  depends_on = [google_organization_iam_member.example]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Read-Only

- `state` (String) This item's install progress in the P0 application:
	- 'stage': The item has been staged for installation
	- 'configure': The item is available to be added to P0, and may be configured
	- 'installed': The item is fully installed
