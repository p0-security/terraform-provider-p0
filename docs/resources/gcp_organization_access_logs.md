---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "p0_gcp_organization_access_logs Resource - p0"
subcategory: ""
description: |-
  An installation of P0, on an entire Google Cloud organization, for access-log collection,
  which enhances IAM assessment. Note that P0 will have access to logs from all your projects, not just those
  configured for IAM assessment.
  To use this resource, you must also:
  grant P0 the ability to create logging sinks on your organization.
  Use the read-only attributes defined on p0_gcp to create the requisite Google Cloud infrastructure.
  P0 recommends defining this infrastructure according to the example usage pattern.
---

# p0_gcp_organization_access_logs (Resource)

An installation of P0, on an entire Google Cloud organization, for access-log collection,
which enhances IAM assessment. Note that P0 will have access to logs from all your projects, not just those
configured for IAM assessment.

To use this resource, you must also:
- grant P0 the ability to create logging sinks on your organization.

Use the read-only attributes defined on `p0_gcp` to create the requisite Google Cloud infrastructure.

P0 recommends defining this infrastructure according to the example usage pattern.

## Example Usage

```terraform
resource "p0_gcp" "example" {
  organization_id = "123456789012"
}

resource "google_organization_iam_audit_config" "example" {
  org_id  = p0_gcp.example.org_id
  service = "allServices"
  audit_log_config {
    log_type = "ADMIN_READ"
  }
  audit_log_config {
    log_type = "DATA_READ"
  }
  audit_log_config {
    log_type = "DATA_WRITE"
  }
}

resource "google_organization_iam_custom_role" "example" {
  org_id      = p0_gcp.example.organization_id
  role_id     = p0_gcp.example.access_logs.custom_role.id
  title       = p0_gcp.example.access_logs.custom_role.name
  permissions = p0_gcp.example.access_logs.permissions
}

# Grants the logging service account permission to write to the access-logging Pub/Sub topic
resource "google_organization_iam_member" "example" {
  org_id = p0_gcp.example.organization_id
  role   = google_organization_iam_custom_role.example.name
  member = "serviceAccount:${p0_gcp.example.service_account_email}"
}

# Install organization access logging in P0
resource "p0_gcp_access_logs" "example" {
  topic_project_id = locals.logs_topic_project
  depends_on = [
    google_organization_iam_audit_config.example,
    google_organization_iam_member.example
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `topic_project_id` (String) The project identifier where the access-logs Pub/Sub topic should reside

### Read-Only

- `state` (String) This item's install progress in the P0 application:
	- 'stage': The item has been staged for installation
	- 'configure': The item is available to be added to P0, and may be configured
	- 'installed': The item is fully installed
